@import com.feth.play.module.pa.views.html.currentAuth
@import com.feth.play.module.pa.views.html.forProviders
@import play.data.Form

@(loginForm: Form[_])

    @main("Battleship", views.html.index.getClass) {
        <h1>Home example</h1>
        @defining(Application.getLocalUser(session)) { currentUser =>
            @if(currentUser != null) {
                <p>Welcome, @currentUser.name!</p>
                <h2>Online users</h2>
                <p>Pick someone to play against!</p>
                <ul class="users">
                @for( u <- OnlineController.getOnlineUsers) {
                    @if(u != currentUser) {
                        <li>
                            <a href="/playagainst/@u.id">@u.name</a>
                        </li>
                    }
                }
                </ul>
            } else {
                <div class="row">
                    <div class="col-md-offset-3 col-md-6">
                        <div class="jumbotron">
                            @helper.form(routes.Application.doLogin) {
                                @if(loginForm.hasGlobalErrors) {
                                    <ul class="alert alert-danger">
                                    @for( error <- loginForm.globalErrors) {
                                        <li>@error.message</li>
                                    }
                                    </ul>
                                }

                                <h2 class="form-signin-heading">Login</h2>

                                @helper.inputText(loginForm("email"),
                                    '_id -> "email",
                                    '_label -> null,
                                    '_showConstraints -> false,
                                    'class -> "form-control",
                                    'placeholder -> "Email")

                                @helper.inputPassword(loginForm("password"),
                                    '_id -> "password",
                                    '_label -> null,
                                    '_showConstraints -> false,
                                    'class -> "form-control",
                                    'placeholder -> "Password")

                                <button class="btn btn-default" type="submit">Login</button>
                            }
                            <a href="/signup">Signup here</a>
                            <hr>
                            <h4>Or Login with:</h4>
                            <ul class="providers">
                            @forProviders() { p =>
                                <li>
                                    <a href="@p.getUrl">@p.getKey</a>
                                </li>
                            }
                            </ul>
                            <br/> <br/>
                        </div>
                    </div>
                </div>
            }
        }
    }
